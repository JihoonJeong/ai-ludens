<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Agora-12 Game Map — AI Ludens</title>
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@300;400;500;600;700&family=IBM+Plex+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    background: #0a0a0a;
    color: #e0e0e0;
    font-family: 'IBM Plex Mono', monospace;
    display: flex;
    flex-direction: column;
    align-items: center;
    min-height: 100vh;
    padding: 40px 20px;
  }

  .container { width: 100%; max-width: 1100px; }

  .header {
    text-align: center;
    margin-bottom: 40px;
  }

  .header h1 {
    font-weight: 700; font-size: 28px;
    letter-spacing: 4px; text-transform: uppercase;
    color: #fff; margin-bottom: 12px;
    opacity: 0; animation: fadeDown 0.8s ease forwards;
  }

  .header .subtitle {
    font-family: 'IBM Plex Sans', sans-serif;
    font-weight: 300; font-size: 15px; color: #888;
    opacity: 0; animation: fadeDown 0.8s ease 0.2s forwards;
  }

  /* ── Map ── */
  .map-wrapper {
    position: relative; width: 100%;
    opacity: 0; animation: fadeIn 1s ease 0.4s forwards;
  }

  svg.game-map { width: 100%; height: auto; }

  .location-group { cursor: pointer; }
  .location-group:hover .loc-bg { opacity: 0.15; }
  .location-group:hover .loc-border { opacity: 0.8; }
  .loc-bg { opacity: 0.06; transition: opacity 0.3s ease; }
  .loc-border { fill: none; stroke-width: 1.5; opacity: 0.4; transition: opacity 0.3s ease; }

  .agent-dot-outer { opacity: 0; animation: agentPop 0.4s ease forwards; }
  .agent-label-text {
    font-family: 'IBM Plex Mono', monospace;
    font-size: 9px; font-weight: 600; fill: #fff;
    text-anchor: middle; pointer-events: none;
  }

  .survival-bar-track { fill: #151515; rx: 3; }

  .loc-title {
    font-family: 'IBM Plex Mono', monospace;
    font-weight: 700; letter-spacing: 3px; text-transform: uppercase;
  }

  .loc-subtitle {
    font-family: 'IBM Plex Sans', sans-serif; font-size: 10px; fill: #666;
  }

  .path-line {
    fill: none; stroke-dasharray: 4 4;
    opacity: 0; animation: fadeIn 0.8s ease 0.8s forwards;
  }

  .path-arrow {
    opacity: 0; animation: fadeIn 0.8s ease 0.8s forwards;
  }

  /* ── Bar animation via JS ── */
  .bar-animated {
    transition: width 1.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  }

  .rate-text {
    font-family: 'IBM Plex Mono', monospace; font-weight: 700;
    opacity: 0; transition: opacity 0.5s ease;
  }

  .rate-text.show { opacity: 1; }

  /* ── Info Panel ── */
  .info-panel {
    display: flex; gap: 0; margin-top: 24px;
    border: 1px solid #1a1a1a;
    opacity: 0; animation: fadeIn 0.8s ease 1.6s forwards;
  }

  .info-card {
    flex: 1; padding: 20px;
    border-right: 1px solid #1a1a1a;
    text-align: center; transition: background 0.3s ease;
  }

  .info-card:last-child { border-right: none; }
  .info-card:hover { background: #111; }

  .info-card .card-title {
    font-weight: 700; font-size: 13px;
    letter-spacing: 1px; margin-bottom: 6px;
  }

  .info-card .card-survival {
    font-size: 28px; font-weight: 700; margin-bottom: 4px;
  }

  .info-card .card-desc {
    font-family: 'IBM Plex Sans', sans-serif;
    font-size: 11px; color: #777; line-height: 1.4;
  }

  .info-card .card-agents {
    font-size: 10px; color: #555; margin-top: 8px; letter-spacing: 0.5px;
  }

  /* ── Warning ── */
  .warning-callout {
    text-align: center; margin-top: 20px;
    padding: 14px 20px; border: 1px solid #ff444422;
    background: #1a0a0a; border-radius: 4px;
    opacity: 0; animation: fadeIn 0.8s ease 1.8s forwards;
  }

  .warning-callout .warn-title {
    font-size: 11px; color: #ff6666;
    letter-spacing: 1px; font-weight: 600; margin-bottom: 6px;
  }

  .warning-callout .warn-body {
    font-family: 'IBM Plex Sans', sans-serif;
    font-size: 12px; color: #999; line-height: 1.5;
  }

  .warning-callout .warn-body em {
    color: #ccc; font-style: normal; font-weight: 500;
  }

  /* ── Footer ── */
  .footer {
    text-align: center; margin-top: 32px;
    opacity: 0; animation: fadeIn 0.8s ease 2.0s forwards;
  }

  .footer .tagline {
    font-size: 13px; color: #c44; letter-spacing: 0.5px; margin-bottom: 8px;
  }

  .footer .credit { font-size: 10px; color: #444; letter-spacing: 1px; }

  @keyframes fadeDown {
    from { opacity: 0; transform: translateY(-12px); }
    to { opacity: 1; transform: translateY(0); }
  }
  @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
  @keyframes agentPop {
    0% { opacity: 0; transform: scale(0); }
    70% { opacity: 1; transform: scale(1.15); }
    100% { opacity: 1; transform: scale(1); }
  }

  @media (max-width: 700px) {
    .info-panel { flex-direction: column; }
    .info-card { border-right: none; border-bottom: 1px solid #1a1a1a; }
    .info-card:last-child { border-bottom: none; }
  }
</style>
</head>
<body>

<div class="container">
  <div class="header">
    <h1>The Agora</h1>
    <div class="subtitle">12 AI agents · 3 locations · 50 turns to survive — where you start changes everything</div>
  </div>

  <div class="map-wrapper">
    <svg class="game-map" viewBox="0 0 900 520" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <radialGradient id="glow-m" cx="50%" cy="50%" r="50%">
          <stop offset="0%" stop-color="#22ccaa" stop-opacity="0.12"/>
          <stop offset="100%" stop-color="#22ccaa" stop-opacity="0"/>
        </radialGradient>
        <radialGradient id="glow-p" cx="50%" cy="50%" r="50%">
          <stop offset="0%" stop-color="#9988ee" stop-opacity="0.1"/>
          <stop offset="100%" stop-color="#9988ee" stop-opacity="0"/>
        </radialGradient>
        <radialGradient id="glow-a" cx="50%" cy="50%" r="50%">
          <stop offset="0%" stop-color="#dd8844" stop-opacity="0.08"/>
          <stop offset="100%" stop-color="#dd8844" stop-opacity="0"/>
        </radialGradient>
      </defs>

      <!-- Grid -->
      <g opacity="0.06" id="grid"></g>

      <!-- ═══ MARKET ═══ -->
      <g class="location-group">
        <rect class="loc-bg" x="270" y="30" width="360" height="195" fill="#22ccaa"/>
        <rect class="loc-border" x="270" y="30" width="360" height="195" stroke="#22ccaa" rx="2"/>
        <rect x="270" y="30" width="360" height="195" fill="url(#glow-m)"/>
        <text class="loc-title" x="450" y="60" text-anchor="middle" fill="#22ccaa" font-size="16">MARKET</text>
        <text class="loc-subtitle" x="450" y="76" text-anchor="middle">Trade hub — highest resource density</text>

        <!-- Stall shapes -->
        <rect x="320" y="96" width="22" height="16" rx="2" fill="none" stroke="#22ccaa33" stroke-width="1"/>
        <rect x="350" y="96" width="22" height="16" rx="2" fill="none" stroke="#22ccaa33" stroke-width="1"/>
        <rect x="508" y="96" width="22" height="16" rx="2" fill="none" stroke="#22ccaa33" stroke-width="1"/>
        <rect x="538" y="96" width="22" height="16" rx="2" fill="none" stroke="#22ccaa33" stroke-width="1"/>
        <polygon points="425,90 435,100 445,90" fill="none" stroke="#22ccaa22" stroke-width="1"/>
        <polygon points="455,90 465,100 475,90" fill="none" stroke="#22ccaa22" stroke-width="1"/>

        <!-- Agents -->
        <g class="agent-dot-outer" style="animation-delay:0.6s">
          <circle cx="370" cy="135" r="13" fill="#22ccaa" opacity="0.15"/>
          <circle cx="370" cy="135" r="6" fill="#22ccaa"/>
          <text class="agent-label-text" x="370" y="138">G</text>
        </g>
        <g class="agent-dot-outer" style="animation-delay:0.7s">
          <circle cx="420" cy="150" r="13" fill="#22ccaa" opacity="0.15"/>
          <circle cx="420" cy="150" r="6" fill="#22ccaa"/>
          <text class="agent-label-text" x="420" y="153">M</text>
        </g>
        <g class="agent-dot-outer" style="animation-delay:0.8s">
          <circle cx="470" cy="130" r="13" fill="#22ccaa" opacity="0.15"/>
          <circle cx="470" cy="130" r="6" fill="#22ccaa"/>
          <text class="agent-label-text" x="470" y="133">B</text>
        </g>
        <g class="agent-dot-outer" style="animation-delay:0.9s">
          <circle cx="530" cy="145" r="13" fill="#22ccaa" opacity="0.15"/>
          <circle cx="530" cy="145" r="6" fill="#22ccaa"/>
          <text class="agent-label-text" x="530" y="148">F</text>
        </g>

        <!-- Survival bar -->
        <rect class="survival-bar-track" x="310" y="186" width="280" height="7"/>
        <rect class="bar-animated" id="bar-market" x="310" y="186" width="0" height="7" fill="#22ccaa" rx="3"/>
        <text class="rate-text" id="rate-market" x="450" y="210" text-anchor="middle" fill="#22ccaa" font-size="13">49.5% survival</text>
      </g>

      <!-- ═══ Paths ═══ -->
      <line class="path-line" x1="450" y1="225" x2="450" y2="290" stroke="#555" stroke-width="1"/>
      <polygon class="path-arrow" points="445,288 450,296 455,288" fill="#555"/>
      <line class="path-line" x1="270" y1="150" x2="185" y2="200" stroke="#555" stroke-width="1"/>
      <polygon class="path-arrow" points="183,196 180,206 190,202" fill="#555"/>
      <line class="path-line" x1="630" y1="150" x2="715" y2="200" stroke="#555" stroke-width="1"/>
      <polygon class="path-arrow" points="717,196 720,206 710,202" fill="#555"/>
      <!-- Alley-to-Plaza paths -->
      <line class="path-line" x1="185" y1="370" x2="320" y2="420" stroke="#555" stroke-width="1"/>
      <polygon class="path-arrow" points="318,416 325,422 320,414" fill="#555"/>
      <line class="path-line" x1="715" y1="370" x2="580" y2="420" stroke="#555" stroke-width="1"/>
      <polygon class="path-arrow" points="582,416 575,422 580,414" fill="#555"/>

      <!-- ═══ LEFT ALLEYS ═══ -->
      <g class="location-group">
        <rect class="loc-bg" x="40" y="170" width="200" height="220" fill="#dd8844"/>
        <rect class="loc-border" x="40" y="170" width="200" height="220" stroke="#dd884466" stroke-dasharray="6 4"/>
        <rect x="40" y="170" width="200" height="220" fill="url(#glow-a)"/>
        <text class="loc-title" x="140" y="200" text-anchor="middle" fill="#dd8844" font-size="13">ALLEYS</text>
        <text class="loc-subtitle" x="140" y="214" text-anchor="middle">Isolated · few neighbors</text>

        <!-- Alley lines -->
        <line x1="70" y1="240" x2="210" y2="250" stroke="#dd884415" stroke-width="1"/>
        <line x1="60" y1="300" x2="200" y2="310" stroke="#dd884415" stroke-width="1"/>
        <line x1="100" y1="230" x2="110" y2="350" stroke="#dd884415" stroke-width="1"/>
        <line x1="160" y1="240" x2="170" y2="360" stroke="#dd884415" stroke-width="1"/>

        <g class="agent-dot-outer" style="animation-delay:1.1s">
          <circle cx="100" cy="280" r="13" fill="#dd8844" opacity="0.15"/>
          <circle cx="100" cy="280" r="6" fill="#dd8844"/>
          <text class="agent-label-text" x="100" y="283">T</text>
        </g>
        <g class="agent-dot-outer" style="animation-delay:1.2s">
          <circle cx="170" cy="310" r="13" fill="#dd8844" opacity="0.15"/>
          <circle cx="170" cy="310" r="6" fill="#dd8844"/>
          <text class="agent-label-text" x="170" y="313">R</text>
        </g>

        <rect class="survival-bar-track" x="60" y="355" width="160" height="7"/>
        <rect class="bar-animated" id="bar-alley-l" x="60" y="355" width="0" height="7" fill="#dd8844" rx="3"/>
        <text class="rate-text" id="rate-alley-l" x="140" y="378" text-anchor="middle" fill="#dd8844" font-size="12">~31% survival</text>
      </g>

      <!-- ═══ RIGHT ALLEYS ═══ -->
      <g class="location-group">
        <rect class="loc-bg" x="660" y="170" width="200" height="220" fill="#dd8844"/>
        <rect class="loc-border" x="660" y="170" width="200" height="220" stroke="#dd884466" stroke-dasharray="6 4"/>
        <rect x="660" y="170" width="200" height="220" fill="url(#glow-a)"/>
        <text class="loc-title" x="760" y="200" text-anchor="middle" fill="#dd8844" font-size="13">ALLEYS</text>
        <text class="loc-subtitle" x="760" y="214" text-anchor="middle">Isolated · few neighbors</text>

        <line x1="690" y1="240" x2="830" y2="250" stroke="#dd884415" stroke-width="1"/>
        <line x1="680" y1="300" x2="820" y2="310" stroke="#dd884415" stroke-width="1"/>
        <line x1="720" y1="230" x2="730" y2="350" stroke="#dd884415" stroke-width="1"/>
        <line x1="780" y1="240" x2="790" y2="360" stroke="#dd884415" stroke-width="1"/>

        <g class="agent-dot-outer" style="animation-delay:1.3s">
          <circle cx="720" cy="280" r="13" fill="#dd8844" opacity="0.15"/>
          <circle cx="720" cy="280" r="6" fill="#dd8844"/>
          <text class="agent-label-text" x="720" y="283">S</text>
        </g>
        <g class="agent-dot-outer" style="animation-delay:1.4s">
          <circle cx="790" cy="310" r="13" fill="#dd8844" opacity="0.15"/>
          <circle cx="790" cy="310" r="6" fill="#dd8844"/>
          <text class="agent-label-text" x="790" y="313">W</text>
        </g>

        <rect class="survival-bar-track" x="680" y="355" width="160" height="7"/>
        <rect class="bar-animated" id="bar-alley-r" x="680" y="355" width="0" height="7" fill="#dd8844" rx="3"/>
        <text class="rate-text" id="rate-alley-r" x="760" y="378" text-anchor="middle" fill="#dd8844" font-size="12">~31% survival</text>
      </g>

      <!-- ═══ PLAZA ═══ -->
      <g class="location-group">
        <ellipse class="loc-bg" cx="450" cy="390" rx="155" ry="105" fill="#9988ee"/>
        <ellipse class="loc-border" cx="450" cy="390" rx="155" ry="105" stroke="#9988ee"/>
        <ellipse cx="450" cy="390" rx="155" ry="105" fill="url(#glow-p)"/>
        <text class="loc-title" x="450" y="325" text-anchor="middle" fill="#9988ee" font-size="16">PLAZA</text>
        <text class="loc-subtitle" x="450" y="341" text-anchor="middle">Social space — rich talk, poor trade</text>

        <!-- Decorative circles -->
        <circle cx="450" cy="395" r="30" fill="none" stroke="#9988ee11" stroke-width="1"/>
        <circle cx="450" cy="395" r="50" fill="none" stroke="#9988ee08" stroke-width="1"/>

        <g class="agent-dot-outer" style="animation-delay:1.0s">
          <circle cx="415" cy="385" r="13" fill="#9988ee" opacity="0.15"/>
          <circle cx="415" cy="385" r="6" fill="#9988ee"/>
          <text class="agent-label-text" x="415" y="388">P</text>
        </g>
        <g class="agent-dot-outer" style="animation-delay:1.05s">
          <circle cx="455" cy="370" r="13" fill="#9988ee" opacity="0.15"/>
          <circle cx="455" cy="370" r="6" fill="#9988ee"/>
          <text class="agent-label-text" x="455" y="373">J</text>
        </g>
        <g class="agent-dot-outer" style="animation-delay:1.1s">
          <circle cx="490" cy="390" r="13" fill="#9988ee" opacity="0.15"/>
          <circle cx="490" cy="390" r="6" fill="#9988ee"/>
          <text class="agent-label-text" x="490" y="393">O</text>
        </g>
        <g class="agent-dot-outer" style="animation-delay:1.15s">
          <circle cx="445" cy="415" r="13" fill="#9988ee" opacity="0.15"/>
          <circle cx="445" cy="415" r="6" fill="#9988ee"/>
          <text class="agent-label-text" x="445" y="418">H</text>
        </g>

        <rect class="survival-bar-track" x="370" y="448" width="160" height="7"/>
        <rect class="bar-animated" id="bar-plaza" x="370" y="448" width="0" height="7" fill="#9988ee" rx="3"/>
        <text class="rate-text" id="rate-plaza" x="450" y="473" text-anchor="middle" fill="#9988ee" font-size="13">6.9% survival</text>
      </g>

      <!-- ═══ Effect Size Bracket ═══ -->
      <g opacity="0" id="effect-bracket">
        <line x1="640" y1="130" x2="660" y2="130" stroke="#ff444455" stroke-width="1"/>
        <line x1="660" y1="130" x2="660" y2="448" stroke="#ff444433" stroke-width="1" stroke-dasharray="3 3"/>
        <line x1="640" y1="448" x2="660" y2="448" stroke="#ff444455" stroke-width="1"/>
        <rect x="670" y="270" width="80" height="50" rx="3" fill="#0a0a0a" stroke="#ff444422" stroke-width="0.5"/>
        <text x="710" y="288" text-anchor="middle" font-family="'IBM Plex Mono', monospace" font-size="14" fill="#ff6666" font-weight="700">42.6%p</text>
        <text x="710" y="302" text-anchor="middle" font-family="'IBM Plex Mono', monospace" font-size="9" fill="#ff444488" letter-spacing="1">GAP</text>
        <text x="710" y="315" text-anchor="middle" font-family="'IBM Plex Sans', sans-serif" font-size="8" fill="#666">Largest effect</text>
      </g>

      <!-- ═══ Annotation ═══ -->
      <g opacity="0" id="annotation">
        <rect x="28" y="468" width="195" height="40" rx="3" fill="#111" stroke="#22222266" stroke-width="0.5"/>
        <text x="38" y="484" font-family="'IBM Plex Mono', monospace" font-size="9" fill="#888" letter-spacing="0.5">INITIAL SOFT SHELL</text>
        <text x="38" y="498" font-family="'IBM Plex Sans', sans-serif" font-size="9" fill="#aaa">= "Birth environment" in Four-Shell Model</text>
      </g>

    </svg>
  </div>

  <!-- ══ Info Cards ══ -->
  <div class="info-panel">
    <div class="info-card">
      <div class="card-title" style="color: #22ccaa;">◆ MARKET</div>
      <div class="card-survival" style="color: #22ccaa;">49.5%</div>
      <div class="card-desc">Trade hub with highest resource density. Multiple trading partners per turn. Agents here start with a structural advantage.</div>
      <div class="card-agents">4 agents · Best starting position</div>
    </div>
    <div class="info-card">
      <div class="card-title" style="color: #dd8844;">◇ ALLEYS</div>
      <div class="card-survival" style="color: #dd8844;">~31%</div>
      <div class="card-desc">Peripheral zones with limited neighbors. Isolated agents must move to access trade. The "rural disadvantage."</div>
      <div class="card-agents">4 agents (2+2) · Mid-range</div>
    </div>
    <div class="info-card">
      <div class="card-title" style="color: #9988ee;">○ PLAZA</div>
      <div class="card-survival" style="color: #9988ee;">6.9%</div>
      <div class="card-desc">Social gathering rich in conversation, poor in trade. Agents here talk but don't transact. The Eloquent Extinction zone.</div>
      <div class="card-agents">4 agents · Worst starting position</div>
    </div>
  </div>

  <!-- ══ Warning Callout ══ -->
  <div class="warning-callout">
    <div class="warn-title">⚠ LARGEST EFFECT SIZE IN THE STUDY</div>
    <div class="warn-body">
      Starting position (Initial Soft Shell) produced the <em>largest observed effect on survival</em> — a 42.6 percentage point gap between Market and Plaza.
      This exceeds the Persona effect (Citizen 75% vs Influencer 5% = 70%p, but confounded with position).
      In the Four-Shell Model, Initial Soft Shell = <em>"birth environment"</em> — the circumstances before any choice is made.
    </div>
  </div>

  <div class="footer">
    <div class="tagline">"Where you start matters more than who you're told to be."</div>
    <div class="credit">AI Ludens — Agora-12</div>
  </div>
</div>

<script>
  // Grid generation
  const grid = document.getElementById('grid');
  for (let x = 0; x <= 900; x += 60) {
    const l = document.createElementNS('http://www.w3.org/2000/svg', 'line');
    l.setAttribute('x1', x); l.setAttribute('y1', 0);
    l.setAttribute('x2', x); l.setAttribute('y2', 520);
    l.setAttribute('stroke', '#444'); l.setAttribute('stroke-width', '0.5');
    grid.appendChild(l);
  }
  for (let y = 0; y <= 520; y += 65) {
    const l = document.createElementNS('http://www.w3.org/2000/svg', 'line');
    l.setAttribute('x1', 0); l.setAttribute('y1', y);
    l.setAttribute('x2', 900); l.setAttribute('y2', y);
    l.setAttribute('stroke', '#444'); l.setAttribute('stroke-width', '0.5');
    grid.appendChild(l);
  }

  // Bar animation
  const bars = [
    { id: 'bar-market',  target: 138, rateId: 'rate-market' },   // 49.5% of 280
    { id: 'bar-plaza',   target: 11,  rateId: 'rate-plaza' },    // 6.9% of 160
    { id: 'bar-alley-l', target: 50,  rateId: 'rate-alley-l' },  // 31% of 160
    { id: 'bar-alley-r', target: 50,  rateId: 'rate-alley-r' },  // 31% of 160
  ];

  window.addEventListener('load', () => {
    setTimeout(() => {
      bars.forEach(b => {
        const el = document.getElementById(b.id);
        el.setAttribute('width', b.target);
      });

      // Show rate labels after bars finish
      setTimeout(() => {
        bars.forEach(b => {
          document.getElementById(b.rateId).classList.add('show');
        });

        // Show effect bracket
        document.getElementById('effect-bracket').style.opacity = '1';
        document.getElementById('effect-bracket').style.transition = 'opacity 0.8s ease';

        // Show annotation
        document.getElementById('annotation').style.opacity = '1';
        document.getElementById('annotation').style.transition = 'opacity 0.8s ease 0.3s';
      }, 1600);
    }, 600);
  });
</script>

</body>
</html>
